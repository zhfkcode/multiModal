(function(t){function e(e){for(var n,l,a=e[0],d=e[1],r=e[2],u=0,h=[];u<a.length;u++)l=a[u],Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&h.push(o[l][0]),o[l]=0;for(n in d)Object.prototype.hasOwnProperty.call(d,n)&&(t[n]=d[n]);c&&c(e);while(h.length)h.shift()();return s.push.apply(s,r||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],n=!0,a=1;a<i.length;a++){var d=i[a];0!==o[d]&&(n=!1)}n&&(s.splice(e--,1),t=l(l.s=i[0]))}return t}var n={},o={app:0},s=[];function l(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.m=t,l.c=n,l.d=function(t,e,i){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)l.d(i,n,function(e){return t[e]}.bind(null,n));return i},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],d=a.push.bind(a);a.push=e,a=a.slice();for(var r=0;r<a.length;r++)e(a[r]);var c=d;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"24dc":function(t,e,i){},"2cc4":function(t,e,i){"use strict";var n=i("24dc"),o=i.n(n);o.a},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("img",{attrs:{alt:"Vue logo",src:i("cf05")}}),n("dialogs",{attrs:{modals:t.dialogs},scopedSlots:t._u([{key:"todo",fn:function(e){var i=e.todo;return[n("input",{directives:[{name:"model",rawName:"v-model",value:i.inpt,expression:"todo.inpt"}],attrs:{type:"text"},domProps:{value:i.inpt},on:{input:function(e){e.target.composing||t.$set(i,"inpt",e.target.value)}}}),n("p",[t._v(t._s(i.name))]),n("p",[t._v(t._s(i.id))]),n("p",[t._v(t._s(i.content))])]}}])}),n("button",{on:{click:t.addModel}},[t._v("新增modla")])],1)},s=[],l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dialogs",class:{flex:t.isFlex,modal:t.singleModal}},t._l(t.dialogs,(function(e){return i("dialog-drag",{key:e.id,ref:"dialog-"+e.id,refInFor:!0,class:e.style.name,attrs:{id:e.id,options:e.options},on:{close:t.removeDialog,"drag-end":t.dialogDragEnd,"drag-start":t.selectDialog,move:t.dialogDragEnd,"change-model":t.changeModel}},[i("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name))]),t._t("todo",null,{todo:e})],2)})),1)},a=[],d=(i("c740"),i("a434"),i("b0c0"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dialog-drag",class:t.drag?"":"fixed",style:t.dialogStyle,attrs:{id:t.id},on:{mousedown:t.startClick}},[i("div",{staticClass:"dialog-header",on:{mousedown:t.mouseDown}},[i("div",{staticClass:"title"},[t._t("title",[i("span",[t._v(t._s(t.title))])])],2),i("div",{staticClass:"buttons"},[i("span",{staticClass:"changmodel button",on:{click:function(e){return e.stopPropagation(),t.changModel(e)}}}),i("span",{staticClass:"pin button",on:{click:function(e){return e.stopPropagation(),t.setDrag(e)}}}),t.buttonClose?i("span",{staticClass:"close button",on:{click:function(e){return e.stopPropagation(),t.close(e)}}}):t._e()])]),i("div",{staticClass:"dialog-body"},[t._t("default")],2)])}),r=[],c=i("b85c"),u={name:"dialog-drag",props:["id","title","options","eventCb"],data:function(){return{width:0,height:0,zIndex:0,offset:{x:0,y:0},left:0,top:0,buttonClose:!0,buttonPin:!0,dragEnabled:!0,drag:!0,overEvent:null,centered:!1,dropEnabled:!1,dragCursor:"default",dragging:!1,clickButton:!1,pX:0,pY:0,availableOptions:["left","top","width","height","buttonClose","centered","dropEnabled","dragCursor","zIndex"]}},created:function(){this.setOptions(this.options)},mounted:function(){if(document.addEventListener("mousemove",this.mouseMove,{passive:!0}),document.addEventListener("mouseup",this.mouseUp),this.centered){var t=this;this.$nextTick((function(){t.center(),t.emit("load")}))}else this.emit("load")},beforeDestroy:function(){document.removeEventListener("mousemove",this.mouseMove),document.removeEventListener("mouseup",this.mouseUp)},watch:{options:function(t){this.setOptions(t),t.centered&&this.center()}},computed:{dialogStyle:function(){var t={left:this.left+"px",top:this.top+"px"};return this.width&&(t.width=this.width+"px"),this.height&&(t.height=this.height+"px"),this.zIndex&&(t.zIndex=this.zIndex),t}},methods:{mouseOut:function(t){this.move(t)},mouseOver:function(t){setTimeout(this.mouseMove(t),50)},close:function(){this.clickButton="close",this.emit("close")},mouseDown:function(t){this.dragging||this.focus(),this.dropEnabled||(this.drag&&t.preventDefault(),this.startMove(t))},mouseMove:function(t){this.dragging&&this.drag&&setTimeout(this.move(t),50)},mouseUp:function(t){t.preventDefault(),this.dropEnabled||(this.stopMove(),this.emit("dragEnd"))},stopMove:function(){this.dragging=!1,this.pX=0,this.pY=0},emit:function(t,e){if(e=e||{id:this.id,left:this.left,top:this.top,x:this.left,y:this.top,z:this.zIndex,width:this.$el.clientWidth,height:this.$el.clientHeight},this.eventCb){var i=this.eventCb;i&&"function"===typeof i&&(e=i(e))}this.$emit(t,e)},move:function(t){if(this.drag&&this.dragEnabled&&(0===t.clientX&&(t=this.overEvent),t&&t.clientX&&t.clientY)){var e=t.clientX,i=t.clientY,n=document.body.offsetWidth-this.$el.clientWidth,o=document.body.offsetHeight-this.$el.clientHeight,s=e+this.offset.x,l=i+this.offset.y;this.left=s<0?0:s>n?n:s,this.top=l<0?0:l>o?o:l,this.dragging++,this.emit("move")}},clearSelection:function(){document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()},changModel:function(){this.$emit("change-model")},startMove:function(t){var e=this.left-t.clientX,i=this.top-t.clientY;this.offset={x:e,y:i},this.dragging=1},startClick:function(){this.emit("drag-start")},focus:function(t){this.drag&&this.clearSelection();var e=this;setTimeout((function(){e.clickButton||e.emit("focus")}),200)},center:function(){var t,e;if("window"===this.centered&&(t=window.innerWidth,e=window.innerHeight),"viewport"===this.centered){var i=document.body;t=i.clientWidth+i.scrollLeft,e=i.clientHeight+i.scrollTop}t=t||this.$parent.$parent.$el.clientWidth,e=e||this.$parent.$parent.$el.clientHeight,this.left=t/2-this.$el.clientWidth/2,this.top=e/2-this.$el.clientHeight/2},setDrag:function(){this.dragEnabled&&(this.drag=!this.drag,this.emit("pin"))},setOptions:function(t){if(t){t.x&&(t.left=t.x),t.y&&(t.top=t.y),t.z&&(t.zIndex=t.z),this.drag=!this.options.pinned&&this.drag;var e,i=this.availableOptions,n=Object(c["a"])(i);try{for(n.s();!(e=n.n()).done;){var o=e.value;this.options.hasOwnProperty(o)&&this.$set(this,o,this.options[o])}}catch(s){n.e(s)}finally{n.f()}}}}},h=u,p=(i("8b17"),i("2877")),f=Object(p["a"])(h,d,r,!1,null,null,null),g=f.exports,v={name:"example",props:{modals:{type:Object,default:function(){return{}}}},components:{DialogDrag:g},data:function(){return{dialogs:[],dialogId:1,singleModal:!1,isFlex:!1,styles:[],style:null,selected:null,droppeds:[]}},created:function(){},watch:{modals:function(t){t.options.centered?(this.dialogs=[this.dialog(t)],this.singleModal=!0):this.dialogs.push(this.dialog(t))}},methods:{drop:function(t){var e=this.findDialog(t);null!==e&&(this.droppeds.push(this.dialogs[e]),this.dialogs.splice(e,1))},unDrop:function(t){var e=this.findDialog(t,this.droppeds);null!==e&&(this.dialogs.push(this.droppeds[e]),this.droppeds.splice(e,1))},newDialog:function(t){return this.dialogs.push(this.dialog(this.styles[0]))},removeDialog:function(t){this.singleModal=!1;var e=t.id,i=this.findDialog(e);this.dialogs.splice(i,1),this.selected&&this.selected.id===e&&(this.selected=null),this.dialogs.length||(this.dialogId=1)},findDialog:function(t,e){e||(e=this.dialogs);var i=e.findIndex((function(e){return e.id===t}));return i>-1?i:null},dialog:function(t){var e=String(this.dialogId);this.dialogId++;var i=t.name,n={},o=t.data?t.data:{};return t.options&&(n=Object.assign({},t.options)),n.left||(n.left=20*e),n.top||(n.top=10*e),n.zIndex=e,{id:e,name:i,style:t,options:n,data:o}},dialogDragEnd:function(t){var e=this.findDialog(t.id);this.$set(this.dialogs[e].options,"left",t.left),this.$set(this.dialogs[e].options,"top",t.top)},selectDialog:function(t){if(!this.selected||this.selected.id!=t.id){var e=this.findDialog(t.id);this.selected=this.dialogs[e];for(var i=this.dialogs.length,n=this.dialogId-t.id,o=0;o<i;o++)if(o==e)this.$set(this.dialogs[o],"options",{zIndex:this.dialogId});else{var s=this.dialogs[o].options.zIndex,l=s>n?s-1:s;this.$set(this.dialogs[o],"options",{zIndex:l})}}},changeModel:function(){this.isFlex=!this.isFlex}}},m=v,b=(i("2cc4"),Object(p["a"])(m,l,a,!1,null,null,null)),y=b.exports,x={name:"App",data:function(){return{dialogs:{}}},components:{Dialogs:y},methods:{addModel:function(){this.dialogs={name:"新增弹窗",options:{width:500}}}}},w=x,_=(i("5c0b"),Object(p["a"])(w,o,s,!1,null,null,null)),D=_.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(D)}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";var n=i("9c0c"),o=i.n(n);o.a},"5e25":function(t,e,i){},"8b17":function(t,e,i){"use strict";var n=i("5e25"),o=i.n(n);o.a},"9c0c":function(t,e,i){},cf05:function(t,e,i){t.exports=i.p+"img/logo.82b9c7a5.png"}});
//# sourceMappingURL=app.c7372a1e.js.map